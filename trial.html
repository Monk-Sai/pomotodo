<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Pomodoro Way To Complete Your Tasks</title>
    <link rel="stylesheet" href="css/style.css">
    <meta name="robots" content="noindex, nofollow">
    <link rel="preload" href="js/script.js" as="script">

    <!-- fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;1,100;1,300;1,400;1,500;1,700&display=swap" rel="stylesheet">

    <!-- Icons -->
    <script src="https://kit.fontawesome.com/d8b7ea8510.js" crossorigin="anonymous"></script>
    <style>
        #frameLoadSection {
        display: flex;
        flex-direction: column;
        align-items: center;
}

#iframeSection iframe {
  display: block; /* Make the iframe visible */
}
    </style>

</head>

<body>
<header>
    <section class="times-header">
        <div class="header-col-1">
            <a href="https://pomotodo.net">
                <img src="img/Pomotodo-logo-WB.webp" alt="Pomotodo-logo" width="65px" height="65px">
            </a>
            <a href="https://pomotodo.net">
                <p>PomoTodo</p>
            </a>
        </div>
        <div class="header-col-2">
            <a href="https://pomotodo.net/blog"><p>Blogs</p></a>
            <!-- <a href="#"><p>Login</p></a> -->
        </div>
    </section>
</header>

<!-- Widget Code  -->
<section class="timer-cal-container">
    <div class="time-container" id="Pomo-timer">
        
        <div class="panel">
            <p id="work">Work</p>
            <p id="break">Break</p>
            <p id="break2">Break 2</button></p>
        </div>
        
        <div class="timer">
            <div class="circle">
                <div class="time">
                    <p id="minutes"></p>
                    <p>:</p>
                    <p id="seconds"></p>
                </div>
            </div>
        </div>
        
        <div class="controls">
            
            <div class="start-pause-control">
                <button id="start" onclick="start()"><i class="fa-solid fa-play"></i></button>
                <button id="pause" onclick="pause()"><i class="fa-solid fa-circle-pause"></i></button>
            </div>

            <div class="reset-control">
                <a href="https://pomotodo.net"><button id="reset"><i class="fa-solid fa-arrow-rotate-right"></i></button></a>
            </div>

        </div>

        <div class="pane-control">

            <div class="carousel-playlist">
                <a href="#frameLoadSection"><button id="playlist" onclick="playlist()" style="display: flex;">Playlist</button></a>
                <iframe id="playlistFrame" src="" style="display: none;"></iframe>
            </div>
            <div class="carousel-checklist">
                <a href="#frameLoadSection"><button id="checklist" onclick="openToDoList()" style="display: flex;">Checklist</i></button></a>
                <iframe id="todolistFrame" src="" style="display: none;"></iframe>
            </div>

        </div>
    </div>
    <div id="popup" class="popup-overlay" style="display: none;">
        <div class="popup-content">
            <p>Time is up!</p>
            <button id="popup-ok-button">OK</button>
        </div>
    </div>
    
</section>

<!-- Checlist and song section -->
<section id="fram
eLoadSection">
</section>

<main>
<section class="fold-0">
    <h1>Boost Productivity with Our Pomodoro Timer</h1>
    <p>Follow the Pomodoro Technique to stay focused. Track your time, and achieve more with our easy-to-use Pomodoro timer.</p>
    <img src="img/Pomodoro timer technique.webp" width="100%">
</section>
<section class="content-fold">
    <h2>What is the Pomodoro Technique?</h2>
    <p>The Pomodoro Technique is a time management method that involves working in focused 25-minute intervals ("Pomodoros") separated by short breaks. Developed by Francesco Cirillo in the late 1980s, this technique has gained widespread popularity due to its simplicity and effectiveness in improving focus, reducing procrastination, and increasing overall productivity.</p>
    <br>
    <h2>How Does the Pomodoro Technique Work?</h2>
    <p>Here's a breakdown of the Pomodoro Technique's essential steps:
        <ol>
        <li>Choose a task: Identify a specific task you want to work on.</li>
        <li>Set a timer for 25 minutes: This is your "Pomodoro."</li>
        <li>Work on the task: Focus solely on the chosen task until the timer rings.</li>
        <li>Take a short break: Stand up, stretch, grab a drink, or do something relaxing for 5 minutes.</li>
        <li>Repeat steps 2-4: After four Pomodoros, take a longer break (20-30 minutes).</li>
        </ol>
    </p>
    <h2>Why Use the Pomodoro Technique?</h2>
    <p>Here are some key benefits of using the Pomodoro Technique:</p>
    <p><strong>Increased focus:</strong> Short work intervals with defined breaks help maintain concentration and minimize distractions.</p>
    <p><strong>Reduced procrastination:</strong> Knowing you only have 25 minutes to work can motivate you to start and avoid delaying tasks.</p>
    <p><strong>Improved productivity:</strong> By tackling tasks in focused bursts, you can accomplish more in less time.</p>
    <p><strong>Enhanced time management:</strong> The technique encourages regular breaks, preventing burnout and improving overall time awareness.</p>
    <p><strong>Reduced stress:</strong> Knowing you have defined work and break periods can alleviate stress and anxiety about deadlines.</p>

    <p><strong>Ready to unleash your productivity potential? Try our Pomodoro timer today!</strong></p>
    <br>
    <div class="CTA-buttons">
    <a href="#Pomo-timer">
        <button class="CTA-buttons">Pomodoro Timer</button>
    </a>
    </div>
</section>
</main>

<section class="content-fold">
    <div>
        <p style="font-size: 24px; align-items: center; text-align: center; width: 100%;"><strong>Pomodoro Blogs</strong></p>
        <div class="Recommened-posts">
            <p><a href="https://pomotodo.net/blog/25-minute-study-method">25 minutes study timer</a></p>
            <p><a href="https://pomotodo.net/blog/what-is-a-pomodoro-timer">What is a Pomodoro Timer</a></p>
            <p><a href="https://pomotodo.net/blog/what-is-a-pomodoro-timer">What is a Pomodoro Timer</a></p>
        </div>
    </div>
</section>

<footer>
    <section class="footer-main">
        <div class="footer-col-1">
            <img src="img/Pomotodo-logo-WB.webp" width="50px" height="50px">
            <p>Pomotodo</p>
        </div>
        <div class="footer-col-2">
            <a href="https://pomotodo.net/blog/">Blogs</a>
        </div>
    </section>
    <section class="footer-claims">
        <div class="footer-claims-row">
            <p>@Copyright 2024</p>
            <p>|</p>
            <p>PomoTodo</p>
        </div>
    </section>
</footer>

<!-- script -->
<script>
// variables
let workTitle = document.getElementById('work');
let breakTitle = document.getElementById('break');
let breakTitleTwo = document.getElementById('break2');


let workTime = 2;
let breakTime = 2;
let breakTime2 = 2;

let seconds = "00";
let pomodoroCount = 0;

let remainingSeconds;

// Pause timer function
async function pause() {
    clearInterval(timerInterval);

     // Store the remaining seconds
    remainingSeconds = seconds;

    document.getElementById('start').style.display = "none";
    document.getElementById('pause').style.display = "flex";

    document.getElementById('start').style.display = "flex";
    document.getElementById('pause').style.display = "none";
}

// Audio element for the alarm
let alarmSound = new Audio('../sounds/alarm-tone-1.mp3');

//Display
window.onload = () => {
    document.getElementById('minutes').innerHTML = workTime;
    document.getElementById('seconds').innerHTML = seconds;

    workTitle.classList.add('active');
    breakTitle.classList.remove('active');
    breakTitleTwo.classList.remove('active');
}

// Handle clicks on specific elements to switch between sessions
const workClick = document.getElementById('work'); 
const breakClick = document.getElementById('break'); 
const break2Click = document.getElementById('break2'); 

workClick.addEventListener('click', () => {
    
    document.getElementById('minutes').innerHTML = workTime;
    document.getElementById('seconds').innerHTML = "00";

    workTitle.classList.add('active');
    breakTitle.classList.remove('active');
    breakTitleTwo.classList.remove('active');

    // Change the button to play
    document.getElementById('start').style.display = "flex";
    document.getElementById('pause').style.display = "none";

    resetTimer();
});

breakClick.addEventListener('click', () => {
    
    document.getElementById('minutes').innerHTML = breakTime;
    document.getElementById('seconds').innerHTML = "00";

    workTitle.classList.remove('active');
    breakTitle.classList.add('active');
    breakTitleTwo.classList.remove('active');

    // Change the button to play
    document.getElementById('start').style.display = "flex";
    document.getElementById('pause').style.display = "none";

    resetTimer();
});

break2Click.addEventListener('click', () => {
    
    document.getElementById('minutes').innerHTML = breakTime2;
    document.getElementById('seconds').innerHTML = "00";

    workTitle.classList.remove('active');
    breakTitle.classList.remove('active');
    breakTitleTwo.classList.add('active');

    // Change the button to play
    document.getElementById('start').style.display = "flex";
    document.getElementById('pause').style.display = "none";

    resetTimer();
});


//start timer
async function start() {

    //change button
    document.getElementById('start').style.display = "none";
    document.getElementById('pause').style.display = "flex";

    // Use the stored remaining seconds or set it to 59 if not set
    seconds = remainingSeconds || 2; // Use remainingSeconds if set, otherwise default to 59

    let workMinutes = workTime - 1;
    let breakMinutes = breakTime - 1;

    // Determine the active element and set initial values accordingly
    if (workTitle.classList.contains('active')) {
        workMinutes = workTime - 1;
    } else if (breakTitle.classList.contains('active')) {
        workMinutes = breakTime - 1;
    } else if (breakTitleTwo.classList.contains('active')) {
        workMinutes = breakTime2 - 1;
    }

    let newActiveElement = detectActiveElement();

    //countdown
    let timerFunction = () => {
        //change the display
        document.getElementById('minutes').innerHTML = workMinutes;
        document.getElementById('seconds').innerHTML = seconds;

        //start
        seconds = seconds - 1;

        if(seconds === 0) {
            workMinutes = workMinutes - 1;
            if(workMinutes === -1){
                // Check for changes in the active element
                if (newActiveElement !== null) {
                    // Play sound and show alert when changing from one session to another
                    alarmSound.play();
                    alert(`Switching to ${newActiveElement} Session`);
                }
                if(pomodoroCount === 0) {
                    // start a 5-minute break after the first Pomodoro
                    workMinutes = breakMinutes;
                    pomodoroCount++;

                    // change panel
                    workTitle.classList.remove('active');
                    breakTitle.classList.add('active');
                    breakTitleTwo.classList.remove('active');

                }else if (pomodoroCount === 1) {
                    // start a 25-minute work after the first Break
                    workMinutes = 2; 
                    pomodoroCount++;

                    // change panel
                    workTitle.classList.add('active');
                    breakTitle.classList.remove('active');
                    breakTitleTwo.classList.remove('active');

                }else if (pomodoroCount === 2) {
                    // start a 10-minute break after the second Pomodoro
                    workMinutes = 2;
                    pomodoroCount++;

                    // change panel
                    workTitle.classList.remove('active');
                    breakTitle.classList.remove('active');
                    breakTitleTwo.classList.add('active');
                }
                else if (pomodoroCount === 3) {

                    workMinutes = 2;
                    clearInterval(timerInterval); // Stop the timer using the stored ID

                    // change panel
                    breakTitle.classList.remove('active');
                    workTitle.classList.add('active');
                    breakTitleTwo.classList.remove('active');
                }
            }
        seconds = 2;
        }
    }
    // start Countdown
    timerInterval = setInterval(timerFunction, 1000);
}


// Function to detect the currently active element
async function detectActiveElement() {
    if (workTitle.classList.contains('active')) {
        return "Work";
    } else if (breakTitle.classList.contains('active')) {
        return "Break";
    } else if (breakTitleTwo.classList.contains('active')) {
        return "Break2";
    } else {
        return null;
    }
}

// Function to reset the timer
async function resetTimer() {
    clearInterval(timerInterval);
    remainingSeconds = undefined; // Reset remainingSeconds
  }

// Playlist function
async function playlist() {
    const iframe = document.getElementById("playlistFrame");
    iframe.src = "widgets/play-list.html";
    iframe.style.display = "flex"; // Show the iframe

    // Create a close button
    const closeButton = document.createElement('button');
    closeButton.addEventListener('click', closeToDoListPopup);

    // Append the close button to the document body
    document.body.appendChild(closeButton);

    // Function to close the popup
    function closeToDoListPopup() {
        iframe.style.display = "none";
        button.style.display = "flex"; // Show the button again
        closeButton.remove(); // Remove the close button
    }

    // Add event listener to close the popup when clicked outside
    function clickOutsidePopup(event) {
        if (!iframe.contains(event.target) && event.target !== closeButton) {
            closeToDoListPopup();
            document.removeEventListener('mousedown', clickOutsidePopup);
        }
    }

    // Add the event listener to close the popup when clicked outside
    document.addEventListener('mousedown', clickOutsidePopup);
}

// To do list
async function openToDoList() {
    const iframe = document.getElementById("todolistFrame");
    iframe.src = "widgets/to-do-list.html";
    iframe.style.display = "flex"; // Show the iframe

    // Create a close button
    const closeButton = document.createElement('button');
    closeButton.addEventListener('click', closeToDoListPopup);

    // Append the close button to the document body
    document.body.appendChild(closeButton);

    // Function to close the popup
    function closeToDoListPopup() {
        iframe.style.display = "none";
        button.style.display = "flex"; // Show the button again
        closeButton.remove(); // Remove the close button
    }

    // Add event listener to close the popup when clicked outside
    function clickOutsidePopup(event) {
        if (!iframe.contains(event.target) && event.target !== closeButton) {
            closeToDoListPopup();
            document.removeEventListener('mousedown', clickOutsidePopup);
        }
    }

    // Add the event listener to close the popup when clicked outside
    document.addEventListener('mousedown', clickOutsidePopup);
}

// Function idems div below
    var section = document.getElementById('frameLoadSection');
    var iframe = document.getElementById('todolistFrame');
    section.appendChild(iframe);

    var section = document.getElementById('frameLoadSection');
    var iframe = document.getElementById('playlistFrame');
    section.appendChild(iframe);

</script>

</body>
</html>